## 몬디의 동작을 순수 css animation과 javascript로 만들어보기!


### 기본적인 애니메이션 관련 속성

animation-delay 엘리먼트가 로드되고 나서 언제 애니메이션이 시작될지 지정합니다.

animation-direction 애니메이션이 종료되고 다시 처음부터 시작할지 역방향으로 진행할지 지정합니다.

animation-duration 한 싸이클의 애니메이션이 얼마에 걸쳐 일어날지 지정합니다.

animation-iteration-count 애니메이션이 몇 번 반복될지 지정합니다.

infinite로 지정하여 무한히 반복할 수 있습니다.

animation-name 이 애니메이션의 중간 상태를 지정합니다. 중간 상태는  @keyframes 규칙을 이용하여 기술합니다.

animation-play-state 애니메이션을 멈추거나 다시 시작할 수 있습니다.

animation-timing-function 중간 상태들의 전환을 어떤 시간간격으로 진행할지 지정합니다.

animation-fill-mode 애니메이션이 시작되기 전이나 끝나고 난 후 어떤 값이 적용될지 지정합니다.



p {
  animation-duration: 3s;
  animation-name: slidein;
}

@keyframes slidein {
  from {
    margin-left: 100%;
    width: 300%
  }

  to {
    margin-left: 0%;
    width: 100%;
  }
}

### 몬디의 등장!
1. 몬디가 들어가있는 동그라미와 x(지우기) 이미지가, 페이지 로딩 뒤 조금 있다가 뜬다.

### 몬디의 동작 분석하기
1. 이미지는 총 2장이다.(A, B)
2. 처음에 A가 등장한다.
3. 일정 텀으로 말풍선이 바뀐다. 말풍선이 로딩 되기 전에 B가 잠깐 나오다가, 말풍선이 뜨면 A 이미지가 나온다.

### 옵션으로 어떤 것을 넣으면 좋을까?
1. 페이지 로딩 후 몬디가 뜨는 딜레이 시간을 조절 할 수 있도록 한다. (페이지 로딩되고 몇 초뒤에 뜰 것인지!)
2. 몬디의 멘트를 넣어주면, 3개가 되든 5개가 되든 10개가 되든 같은 텀과 같은 방식으로 말풍선 기능이 돌아가도록 한다.
3. 말풍선 하나가 떴다가 다음 말풍선이 나오는 텀을 조절할 수 있도록 한다.


### 개발일지

#### 첫째날
1. CSS를 그대로 가져와서 개발하기로 했다. 페이지의 내용은 더미 텍스트로 채웠다.
2. 기존 소스를 분석해보니, 이상하게도 인라인 스타일이 먹혀있는 곳들이 몇군데 있었다.
3. 왜 이렇게 했을까?
4. 애니메이션 떄문이었다. css에서 opacity와 display none을 줘서 안보이게끔 한 다음 transition을 주고, 인라인 태그에서 먹여놓은 소스가 transition에 설정되어 있는 시간 이후에 적용되게끔 짜놓은 것이다.
5. 왜이렇게 했지?
6. 일단 jquery를 cdn 방식으로 끌어왔다.
7. 페이지가 로드 되자마자 동작하는 코드를 넣었다. 로드된 뒤 일정시간 뒤에 chatarea가 보이게 하기 위하여 settime 함수를 사용했다.
8. 원리는 이렇다. chatarea 자체에 css로 opacity를 0을 준다음에, jquery 함수로 이를 특정시간 후에 보이게끔 했다. animate함수를 써서 서서히 보이게끔 하였다.
9. 기존 css에 있던 'opacity: 0' 이나 'display: none' 같은 무쓸모들을 숙청하고, 인라인 태그로 먹혀있던 style들도 다 제거했다.
10. 코드가 깔끔해져서 기분이 좋았다.
11. 끝!

#### 둘째날
1. CSS를 처음부터 다시 만들어야 하나 고민 중이다.
2. 말풍선 안에 들어갈 멘트에 따라서 말풍선의 width가 달라지기 때문에 width를 auto로 줘야하는데,
3. 애니메이션에서 width를 %가 아닌 auto로 줘버리면 애니메이션이 먹히지를 않는다....
4. width 0 -> 100% 으로 줘가며 텍스트도 넘치지 않는 CSS 수정 방법을 찾아내든,
5. 애니메이션을 width가 아닌 다른 속성을 변화 시켜서 말풍선이 자연스럽게 애니메이션 동작을 하게 되도록 방법을 찾든 둘중에 하나를 해야 하는 상황이다.
6. 그래서 오늘은 여기까지 하고 자야겠다. 극혐.

#### 셋째날
1. CSS와 html을 처음부터 다시 손봤다.
2. 추후 서비스에 반영할 때 최대한 부작용(?)을 덜기 위해 기존에 있는 소스로 약간의 css와 js 코드만을 가미해서 만들려고 하였으나, 도저히 불가능 할 것 같아서 차라리 다시 짜는게 나을꺼라는 판단하에 그렇게 했다.
3. 속이 다 시원하다.
4. 일단 말풍선의 wave가 존재한다고 가정해서 n개의 sub ment와 1개의 main ment를 가진 ment wave 를 만들었다.
5. ment_wave는 여러개가 있을 수 있다.
6. sub_ment는 여러개가 있을 수 있다.
7. main_ment는 1개만 있을 수 있다.
8. ment_wave에서 sub_ment들은 하나씩 젠이 되며, 맨 마지막에 main_ment가 젠되고 나면 하나의 wave가 끝나고 다음 ment_wave가 등장하는 방식이다.
9. CSS는 역시 어렵다. 내가 짠게 최선이었을까? 라는 생각을 하게 된다. (CSS 코드를 짜고나면 항상 하는 생각. 방법이 워낙 여러가지라서 그런 것 같다.)
10. 처음 페이지 로드 시 챗봇이 스무스하게 등장하고, 첫번쨰 ment_wave의 첫번째 sub_ment가 등장했다가 사라지는 부분까지 완성했다. 이제 js코드 디자인을 다시한 번 해봐야겠다.
11. 내가 짠 html과 css니까, js 코드를 짜는것도 훨씬 수월할 것으로 예상된다.

#### 넷째날
1. dom구조를 약간 개선했다. 말풍선 안의 텍스트만 바꾸는 방식으로 하고 말풍선이 그때마다 접혀졌다가 펴졌다가를 반복하게 만들려고 했었는데, 생각해보니 그 자체가 모순이었다. 말풍선 부터 각각 분리를 해서 코드를 짜면 텍스트와 말풍선을 따로따로 애니메이션 제어를 해줄 필요 없이 말풍선(+안의 텍스트)이 한 단위로 동작하게끔 됐을텐데.
2. 이것 때문에 오늘 기능은 더 develop이 되었는데도 불구하고 코드가 오히려 더 줄어들었다.
3. 이제 ment_wave가 하나 있다고 쳤을 때, sub ment들이 쫘르르 순서대로 나오고, 최종적으로 main ment가 나오는 기능을 완성했다.
4. sub ment와 main ment의 duration을 별도로 지정 할 수 있도록 분리를 해놓았다.
5. 내 코드를 사용하는 사용자가 편하도록 변수를 선언해서 그 안에 넣은 숫자만큼이 duration이나 delay가 되도록 하면 더욱 좋을 것 같다.
6. 이때문에 짜놓은 코드에 추가적으로 개발해야 할 사항을 주석으로 달아놓았다.
7. 앞으로의 과제: 여러개의 ment wave가 있을 때, 각각의 ment wave가 순서대로 나오고 동작할 수 있도록 방법을 구상해야겠다.
8. 한 개의 ment wave의 동작이 다 끝났음을 인지할 수 있는 방법? 혹은 앞 ment wave에서 멘트들이 나타나고 사라지는게 뒤 ment wave의 시작점과 겹쳐지지 않도록 연산을 하는 연산식을 찾아내기? 어떻게 접근하면 좋을까? 아이디어를 떠올려봐야겠다.

#### 다섯째날
1. 일단 대략 완성을 했다.
2. 라이브러리 만드는게 얼마나 힘든지 느꼈다.

#### 보완할 점
1. ` 를 쓰거나 들여쓰기, 혹은 변수들을 한데 묶어서 코드를 좀 정리하면 더 깔끔해질것 같다. (시간 내서 코드 한번 정리해야지)
2. ES6 문법 넣어서 function(){} 같은 부분들 코드 간소화 하면 좋을 것 같다.
3. function(함수) 단위로 묶을 수 있는 것들 따로 빼내서 작성하면 더 깔끔해지겠다.
4. CSS의 비중을 더 높여서 만들 수 있는 방법은 없을지 찾아봐야겠다.
5. 작업자가 DOM 구조에서 ment_wave 별로 subment와 mainment들을 한 단위로 묶어서 작업할 수 있도록 코드를 개선하는 것 필요.
6. main ment 쪽에 화살표 이미지 작업 빼먹었다. 
7. 각 변수들에서 어느 한 변수가 다른 변수 보다 값이 크거나 혹은 작거나 하면 안되는 경우가 있는데, 이를 작업자가 어겼을 경우 대처하는 예외처리를 해야한다. 그렇지 않으면 애니메이션이 오작동 한다.
8. 말풍선 간의 텀이 변수에 입력한 값 만큼 나타나지 않는다. 

#### 결론
망했다. 다시 만들어야 함.
